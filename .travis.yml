language: python
dist: xenial
python:
- 2.7
- 3.5
- 3.6
- 3.7
install:
- pip install pipenv
- pipenv install --dev --deploy
script: pipenv run py.test -v
before_deploy:
- sed -i.bak "s/=get_version()/='$TRAVIS_TAG'/g" setup.py
- cat setup.py
- if [ $(python setup.py --version) == '0.0.0' ]; then travis_terminate 1; fi
deploy:
  provider: pypi
  user: uc-ctds
  skip_existing: true
  skip_cleanup: true
  on:
    tags: true
  password:
    secure: md8FsApChFTJdaWbnZ7uz6xcB6oZcxeq9fV1tLNmeIQ6g7sbQKW91H99IZmYGolhWrWM3t1u7UTMUwcXqU4LfY1KWKqxbSJ29p09DEZ8wOfRDMxKyXNJEnFqwBG+VAcC/zC34eZ3v+kzuQQWWcKl9O1X+ArmGYIR83kwv2rMZfAnfNi6iFHqjfvwXgJ7iDduDp7p8ZtTsrq773hGBP4BtrbOfcWxpknmkyj1FKT2ZuBtmiCzAsBBcBS1eosoadN12a0Y8kzFAWn6PGev/1GWM7ZdvKH2wGGqhhlFW98Yuu8Lhw005Y4L0lxuhpenAZ9EYecDdyIELYdFxcbx7FI4XaqvbZ+KaqWMYR/42qQIsx7GiAc07nukUgsvEczbFXlvvb69dwE4s+d2WcvGF5/82zZ765ijwkx2H5HGcFbao8BuYhDdiKzTN1rWieyGTCTEfPCbsc/CVnmlSE7NH+8CNDtBMI76UmgWB04fhRH5E5azl9wxoGp6NGjzmyYX4L3/PSk1erbA38MkAoh4f6hbUbNXAMuwMsOVCJnpj+NDTHK3sIwDL6X7lEE5mpbMgQ3LK6am8TCIQ5zYT7urYaUTTWBDPAL3Z3GQVhXO8OIpkw6txTcutl7HUjxjtoAUx98jGnnE8SvwWIwOCOzhyZpEtGDU2AFufQS3HJv+MrlfvtU=
env:
  global:
    secure: uovNV8i+Ef7EbSGaeGKvlm168nsuP6XF6p/ERlRQZtZ9HQBF14IVlqYnLgBvFGVdFsIc1mCroKqfdIiJIy75Bx1YOvO+u/3mxjMlOxuqxNCbIK0bYxZhrLqbR1oXGk6yPALpaeBdtuf43tnux0Ajk4URg2mIfqySkVldQPzL5XUfH/ueIruz6y5/alt7+c1Uj7HblGVBJbHx6JKGJSjpknfJyZXirw/lXpcFgOmRFjijGo4vYqmHIppGhERCCLNXdOTbrqe5dnbb8AD2AZwRDkgluYAYWaaJr9VosKzqD1lUfBVAbV91noCb+Nf91wfhzZemRWSy0xgIAPrpaT5QUm1OtJ1Z9J7yjD7Ljlt+CT5xHOE1uquKRXKzWpv4q1lHGyqyePKKHIcslu4gu1H8BO1EF212doQJFuPE68xEuSrVpZ0r2EKIYCgGfuto3AXWQzriD9uBQpqaVCNVjUkRVTa8t8G4WVLr3SeYSsY97CNASShJ9QiAshPogPv+FA+JM4JL0gyfrSCsaW2YtU1ovFv0ppP9KHtWzIZPEqZdMI8EUK4ugse94c2inzRJCTmE8j2K2J9sZS9i0jhTOnuL9mviXzr5goopmAYYhF1OWNV0KTDcxHnXSmWZR3HQP35aPFGZzjc0HLN/8khPb+P4mJ/XZfL+RtaQzJIYJ08TY6c=
after_deploy:
- ./release_notes.sh
